{% extends "base.html" %}

{% block title %}Title {{ title_num }} - CFR Viewer{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ul>
        <li><a href="{{ url_for('browse.index', year=year) }}">All Titles</a></li>
        <li>Title {{ title_num }}</li>
    </ul>
</nav>

<hgroup>
    <h1>Title {{ title_num }}: {{ title_name }}</h1>
    <p>{{ "{:,}".format(word_count) }} words</p>
</hgroup>

{% include "components/year_selector.html" %}

{% if structure and structure.children %}
<article>
    <h2>Structure</h2>
    <p class="secondary">{{ structure.children | length }} parts</p>

    {% for part in structure.children %}
    <details>
        <summary>
            <strong>Part {{ part.identifier }}</strong>
            <small class="secondary">({{ part.section_count }} section{{ 's' if part.section_count != 1 else '' }})</small>
        </summary>
        <ul class="section-list">
            {% for section in part.children %}
            <li>
                <a href="{{ url_for('browse.section', title_num=title_num, section=section.identifier, year=year) }}">
                    {% if section.heading %}
                        {{ section.heading }}
                    {% else %}
                        &sect; {{ section.identifier }}
                    {% endif %}
                </a>
            </li>
            {% endfor %}
        </ul>
    </details>
    {% endfor %}
</article>
{% else %}
<p>No structure data available for this title.</p>
{% endif %}
{% endblock %}
