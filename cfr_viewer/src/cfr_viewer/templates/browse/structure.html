{% extends "base.html" %}
{% from "components/structure_table.html" import structure_table %}
{% from "components/table_filter.html" import table_filter %}

{% block title %}{{ breadcrumb[-1].label if breadcrumb else "Structure" }} - Title {{ title_num }} - Lens{% endblock %}

{% block content %}
<nav aria-label="breadcrumb">
    <ul>
        <li><a href="{{ url_for('browse.titles', year=year) }}">All Titles</a></li>
        <li><a href="{{ url_for('browse.title', title_num=title_num, year=year) }}">Title {{ title_num }}</a></li>
        {% for crumb in breadcrumb[:-1] %}
        <li><a href="{{ url_for('browse.structure', title_num=title_num, path=crumb.path, year=year) }}">{{ crumb.label }}</a></li>
        {% endfor %}
        {% if breadcrumb %}
        <li>{{ breadcrumb[-1].label }}</li>
        {% endif %}
    </ul>
</nav>

{% if node %}
<hgroup>
    <h1>{{ breadcrumb[-1].label if breadcrumb else "Structure" }}</h1>
    <p>{{ "{:,}".format(node.word_count or 0) }} words, {{ node.section_count or 0 }} sections</p>
</hgroup>

{% include "components/year_selector.html" %}

{{ table_filter("structure-table", "0", "Filter...") }}
{{ structure_table(node.children if node else [], title_num, year, breadcrumb[-1].path if breadcrumb else "", baseline_year=BASELINE_YEAR, table_id="structure-table") }}
{% else %}
<h1>Not Found</h1>
<p>The requested structure could not be found.</p>
{% endif %}
{% endblock %}
