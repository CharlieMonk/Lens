{# Macro for rendering a "Since/To BASELINE_YEAR" change percentage cell #}
{# Positive = growth (red), Negative = shrinkage (green), Zero/None = neutral #}
{# is_before_baseline: true if viewing year < baseline year (show N/A), false if >= (show new) #}
{% macro change_cell(change_pct, show_new=false, is_before_baseline=false) %}
<td class="numeric {% if change_pct is none %}{% if show_new and not is_before_baseline %}change-positive{% else %}change-zero{% endif %}{% elif change_pct|round(1) == 0 %}change-zero{% elif change_pct > 0 %}change-positive{% else %}change-negative{% endif %}" data-value="{{ change_pct if change_pct is not none else (999 if show_new and not is_before_baseline else 0) }}">{% if change_pct is not none %}{{ "{:.1f}%".format(change_pct) if change_pct|round(1) == 0 else "{:+.1f}%".format(change_pct) }}{% elif show_new %}{% if is_before_baseline %}N/A{% else %}new{% endif %}{% else %}â€”{% endif %}</td>
{% endmacro %}
